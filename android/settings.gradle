rootProject.name = 'Activity Tracker'

// 1) Expo autolinking (leave as-is)
apply from: new File(
    ["node", "--print", "require.resolve('expo/package.json')"]
        .execute(null, rootDir)
        .text
        .trim(),
    "../scripts/autolinking.gradle"
)
useExpoModules()

// 2) Replace the old CLI‐platform autolinking with the new react‐native‐gradle‐plugin path
apply from: new File(
    ["node", "--print", "require.resolve('react-native-gradle-plugin/package.json')"]
        .execute(null, rootDir)
        .text
        .trim(),
    "../native_modules.gradle"
)
applyNativeModulesSettingsGradle(settings)

// 3) Include the main app module
include ':app'

// 4) Include the React Native Gradle plugin build
includeBuild(
    new File(
        ["node", "--print", "require.resolve('@react-native/gradle-plugin/package.json')"]
            .execute(null, rootDir)
            .text
            .trim()
    ).getParentFile()
)
